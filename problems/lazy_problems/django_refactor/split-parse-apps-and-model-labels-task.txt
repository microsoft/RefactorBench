Split the function into two: one for apps, one for models.