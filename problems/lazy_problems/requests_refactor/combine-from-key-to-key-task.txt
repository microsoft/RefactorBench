Refactor the key-value list conversion functions into a single function and adjust the repository.